{"version":3,"sources":["meteor://ðŸ’»app/client/templates/lists-new.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/templates/lists-new.js","sourcesContent":["var ERRORS_KEY = 'signinErrors';\n\nTemplate.listNew.onCreated(function() {\n  Session.set(ERRORS_KEY, {});\n  Session.set(\"searchResults\", \"\");\n});\n\nTemplate.listNew.helpers({\n  searchResults: function(query) {\n    return Session.get(\"searchResults\");\n  }\n});\n\nTemplate.listNew.events({\n  'submit .new-list': function(event, template) {\n    event.preventDefault();\n\n    // get accountEmails\n    var nameInput = template.$('[name=emails]').val();\n    var groupUsers = nameInput.split(',');\n\n    // get user IDs from database\n    userIds = [];\n    Meteor.users.find().forEach(function(user) {\n      if (groupUsers.indexOf(user.username) != -1) {\n        userIds.push(user._id);\n      }\n    });\n\n    // store group in database\n    if (userIds.length == groupUsers.length){\n      var group = {userIds: userIds, name: nameInput, messageCount: 0};\n      group._id = Lists.insert(group);\n\n      // goes to the list you just made\n      Router.go('listsShow', group);\n    } else {\n      alert(\"Please doublecheck usernames\");\n    }\n  },\n\n  \"submit .search\": function(event, template) {\n    event.preventDefault();\n    console.log(\"Called\");\n\n    var query = template.$('[name=search-entry]').val();\n    var result = Meteor.users.find({username: {$regex: query}});\n    var resultStr = result.map(function(user){ return user.username}).join(',');\n\n    Session.set(\"searchResults\", resultStr);\n  }\n});\n"]}